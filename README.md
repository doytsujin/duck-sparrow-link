# duck-sparrow-link
LoRa based bakcend for Sparrow Mesh

# Overview
This repository helps establish connecetion from smartphones to IBM watson backend via network of LoRa/BLE/WiFi interfaces.
The hardware primarily consists of 2 types of devices Mama and Papa devices. The Mama devices connect to smartphones via BLE and Wifi
and recieve data which is forwarded to Papa devices over LoRa. The Papa devices on recieving this data parse it and publish it on a 
appropriate mqtt topic so that it reaches the IBM watson backend. THe response is asynchronously recieved on a differernt mqtt topic
which is again sent back to Mama over LoRa and then is recieved by the smartphone

## Message format
Any messages generated by users have a fixed JSON format:
The Papa device can parse messeges in this format in order to route them correctly
```
{
"key":$messageID,
"userID":$userID,
"timeStamp":$timeStampOfMessageOrigin,
"destination":$destination,
"message":$messgeContent
}

$userID - As defined in UserIds
//e.g sparrow:jaylohokare123456789

$timeStampOfMessageOrigin - Time stamp when message was generated
//e.g 982823474842  

$messageID - $userID + '_' + $timeStampOfMessageOrigin
//e.g sparrow:jaylohokare123456789_982823474842

$destination - "sparrow" if destination is Sparrow, $destinationUserID if message is sent to someone within the mesh

$messageContent - The actual message content
```
